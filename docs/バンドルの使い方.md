中身は、前回の提案をそのまま“PR 1〜5”に分割した、差分パッチ＋ドロップイン用ファイル＋最小テスト＋マイグレーションのセットです。README\_APPLY.mdに適用手順と順番を書いてあります（PR1→PR2→PR3→PR4→PR5）。

ざっくり要点だけ：

* PR1（DBマイグレ&バグ修正）
  `valuations` に `unit_price_jpy` を追加、直近評価の ORDER BY 統一、簡易マイグレーションランナー（`scripts/apply-migrations.js`）。最小テスト付き。

* PR2（セキュリティ初期化）
  `SESSION_SECRET` 必須化、helmet、login rate-limit、初期セットアップ `/api/setup` の雛形。テスト雛形付き。

* PR3（CSV正本&厳格バリデーション&エクスポート）
  正本ヘッダ定義、`YYYY-MM-DD`厳格、金額正規化、列挙チェック、全体ロールバック、`GET /api/export?format=csv|md|json`。

* PR4（UI修繕＆ダッシュボード）
  Recharts import崩れ修正、月次「簿価 vs 評価」の2本線追加、2fr:1frの多層カード（右カラムは財務・右寄せ・評価額最大）、CSS同梱。

* PR5（市場データ実用化）
  `YahooFxProvider`（USDJPY/CNYJPY）、`TanakaProvider`（田中貴金属・暫定パーサ）、`price_cache`やstale表示にそのまま乗る想定。最小テスト雛形。

次の一手：

1. リポジトリ直下でZIPを展開 → `README_APPLY.md`に従って順に適用。
2. パッチが当たらない箇所は、同梱の `files/` を見ながら手動マージでOK。
3. `.env` に **SESSION\_SECRET** を必ず設定（長くてランダム）。`MARKET_ENABLE=0`を既定、本番で必要時のみ1に。
4. `npm i`（helmet / express-rate-limit / recharts / @tanstack/react-table など）→ `npm test` → 起動確認。
